if(typeof(EventSource)!=="undefined"){var source=new EventSource("/play-status");source.onmessage=function(b){var d=JSON.parse(b.data);var a=document.getElementById("myvideo");if(a.src!==d.url){a.src=d.url}var c=Math.abs(a.currentTime-d.seconds);if(c>1){a.currentTime=d.seconds}if(d.playing&&a.paused){a.currentTime=d.seconds;a.play()}else{if(!d.playing&&!a.paused){a.currentTime=d.seconds;a.pause()}}}}else{console.log("No event source")}function toggle(a){a.paused?a.play():a.pause()}window.addEventListener("load",function(){var b=document.cookie.substr(document.cookie.indexOf("=")+1);var d=document.getElementById("myvideo");var a=document.getElementById("url");var c=document.getElementById("channel");var e=window.location.origin+"/channel/"+b;c.href=e;c.text=e;a.onkeydown=function(f){if(f.which==13){$.post("/play-url",{url:a.value});this.value=""}};document.addEventListener("keypress",function(f){if(f.which==32&&document.activeElement!==a){toggle(d)}});d.addEventListener("play",function(){$.get("/play")});d.addEventListener("pause",function(){$.get("/pause")});d.addEventListener("seeked",function(){$.get("/seek",{currentTime:this.currentTime})})});